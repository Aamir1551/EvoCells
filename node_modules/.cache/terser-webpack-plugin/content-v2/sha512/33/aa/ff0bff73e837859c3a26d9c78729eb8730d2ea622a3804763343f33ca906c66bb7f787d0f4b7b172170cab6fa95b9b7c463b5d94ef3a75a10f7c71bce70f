{"code":"!function(t){var e={};function i(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)i.d(o,r,function(e){return t[e]}.bind(null,r));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"\",i(i.s=0)}([function(t,e,i){\"use strict\";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this;Object.defineProperty(e,\"__esModule\",{value:!0});var s=i(1),a=document.getElementsByTagName(\"canvas\")[0],h=a.getContext(\"2d\"),l=function(){function t(t,e){var i;void 0===t&&(t=[]),void 0===e&&(e=[]),this.timeCounter=0,i=[t,e],this.food=i[0],this.cells=i[1]}return t.prototype.drawAllObjects=function(){for(var t=0;t<this.food.length;t++)this.food[t].draw();for(t=0;t<this.cells.length;t++)this.cells[t].draw()},t.prototype.detectAllCellCollisions=function(){for(var t=0;t<this.cells.length;t++){var e=this.cells[t];if(e.isActive)for(var i=0;i<e.vertices.length;i++){var o=e.vertices[i];if(o.colliding=!1,o.position.isInside()||(o.colliding=!0),0==v.position.isInside())return!0;for(var r=0;r<p.allVertices.length;r++){var n=v.position.distanceSquared(p.allVertices[r].position);if(n<=this.distanceThreshold&&p.allVertices[r].objectPointer.cellID!=v.cellPointer.cellID){n<=this.distanceThreshold/4&&\"FOOD\"==p.allVertices[r].cellPointer.cellType&&p.allVertices[r].cellPointer.isActive&&(p.allVertices[r].cellPointer.isActive=!1,v.cellPointer.size=Math.sqrt((v.cellPointer.size*v.cellPointer.size*Math.PI+10)/Math.PI));var s=p.allVertices[r].cellPointer;return(n=s.size+v.cellPointer.size-v.cellPointer.position.distanceSquared(s.position))/2>=.7*s.size&&\"CELL\"==p.allVertices[r].cellPointer.cellType&&p.allVertices[r].cellPointer.size<v.cellPointer.size&&p.allVertices[r].cellPointer.isActive&&(p.allVertices[r].cellPointer.isActive=!1,v.cellPointer.size=Math.sqrt(Math.pow(v.cellPointer.size,2)+Math.pow(p.allVertices[r].cellPointer.size,2))),!0}}return!1}}},t}();e.Environment=l,drawBackground();var c=new s.Point(p.center.x-p.width/2,p.center.y-p.height/2);h.beginPath(),h.fillStyle=\"white\",h.rect(0,0,p.width,p.height),h.fill(),h.strokeStyle=\"lightgray\",h.lineWidth=1,h.beginPath();for(var u=0;u<Math.floor(p.width/p.square)+1;u++){var d=u*p.square-c.x%p.square;h.moveTo(d,0),h.lineTo(d,p.height)}for(u=0;u<Math.floor(p.height/p.square)+1;u++){d=u*p.square-c.y%p.square;h.moveTo(0,d),h.lineTo(p.width,d)}h.stroke(),iterate(),this.timeCounter+=.01,this.timeCounter>=1&&(this.cells.forEach((function(t){return t.updatePoints()})),this.timeCounter=0),this.cells.forEach((function(t){return t.moveXY(n.timeCounter)})),p.center=new s.Point(p.mapwidth/2,p.mapheight/2),this.drawBackground();var p=function(){function t(){}return t.TAU=2*Math.PI,t.square=50,t.width=a.width,t.height=a.height,t.mapwidth=t.width/t.square*t.square,t.mapheight=t.height/t.square*t.square,t.borderLeft=0,t.borderRight=t.mapwidth,t.borderTop=0,t.borderBottom=t.mapheight,t.center=new s.Point(t.mapwidth/2,t.mapheight/2),t.directionX=0,t.directionY=0,t}();e.setUp=p;var f=function(){function t(t,e,i,o){this.position=t,this.isActive=e,this.color=i,this.size=o}return t.prototype.draw=function(){if(this.isActive){var t=new s.Point(p.center.x-p.width/2,p.center.y-p.height/2);this.movePoints(),h.fillStyle=s.toRGB(this.color),h.strokeStyle=s.toRGB(this.color),h.lineWidth=7;var e=this.vertices.length;h.beginPath();for(var i=0;i<e;i++){var o=this.vertices[i].distance,r=p.TAU*i/e+this.initialAngle;h.lineTo(this.position.x+Math.cos(r)*o-t.x,this.position.y+Math.sin(r)*o-t.y)}h.closePath(),h.fill(),h.stroke()}},t}();e.GameObject=f;var g=function(t){function e(e,i,o){void 0===o&&(o=!0);for(var r=t.call(this,e,o,i,5)||this,n=0;n<Math.ceil(r.size);n++)r.vertices.push(new s.Vertex(r,r.position,r.size,Math.random()-.5));return r.initialAngle=Math.random()*p.TAU,r}return r(e,t),e.prototype.movePoints=function(){},e}(f);e.Sugar=g;var m=function(t){function e(i,o,r,n){void 0===n&&(n=!0);var a=t.call(this,i,n,r,o)||this;a.vertices=[],a.distanceThreshold=25,a.initialAngle=Math.random()*p.TAU,a.directionX=0,a.directionY=0,a.updatePoints(),a.cellID=e.cellCount;for(var h=0;h<Math.ceil(a.size);h++)a.vertices.push(new s.Vertex(a,a.position,a.size,Math.random()-.5));return e.cellCount++,a}return r(e,t),e.prototype.isTouchingSmallerCell=function(){for(var t=0;t<p.cells.length;t++){var e=p.cells[t];if(!(e.cellID==this.cellID||0==e.isActive||this.size<e.size))if((e.size+this.size-this.position.distanceSquared(e.position))/2>=.7*e.size)return p.cells[t].isActive=!1,this.size=Math.sqrt(Math.pow(this.size,2)+Math.pow(e.size,2)),!0}return!1},e.prototype.eatSugar=function(){for(var t=0;t<p.sugar.length;t++){var e=this.position.distanceSquared(p.sugar[t].position);if(e<1e-6&&p.sugar[t].isActive)return alert(e),p.sugar[t].isActive=!1,this.size=Math.sqrt((Math.pow(this.size,2)*Math.PI+10)/Math.PI),!0}return!1},e.prototype.movePoints=function(){for(var t=this.vertices.length,e=[],i=0;i<this.vertices.length;i++){var o=this.vertices[i];e.push(new s.Vertex(o.objectPointer,new s.Point(o.position.x,o.position.y),o.distance,o.velocity))}for(var r=0;r<e.length;r++){var n=[this.vertices[r],this.vertices[(r-1+t)%t],this.vertices[(r+1)%t]],a=n[0],h=n[1],l=n[2],c=(h.velocity+l.velocity+8*Math.min(Math.max(.7*(a.velocity+Math.random()-.5),-10),10))/10,u=this.isTouchingSmallerCell()||!e[r].position.isInside()||this.eatSugar()?Math.min(c,0)-1:c,d=(h.distance+l.distance+8*(9*Math.max(a.distance+c,0)+this.size)/10)/10,v=p.TAU*r/t+this.initialAngle;this.vertices[r]=new s.Vertex(this,new s.Point(this.position.x+Math.cos(v)*d,this.position.y+Math.sin(v)*d),d,u)}},e.prototype.updatePoints=function(){this.points=[s.getRandomPositionOnCanvas(),s.getRandomPositionOnCanvas(),s.getRandomPositionOnCanvas(),s.getRandomPositionOnCanvas()]},e.prototype.moveXY=function(t){if(this.isActive){var e=s.bezierCurve(this.points[0],this.points[1],this.points[2],this.points[3],t),i=e[0],o=e[1],r=[i-p.width/2,o-p.height/2],n=Math.sqrt(r[0]*r[0]+r[1]*r[1]),a=n<100?n/100:1;this.directionX=r[0]/n*a,this.directionY=r[1]/n*a;this.position=new s.Point(Math.max(Math.min(this.position.x+4*this.directionX,p.borderRight),p.borderLeft),Math.max(Math.min(this.position.y+4*this.directionY,p.borderBottom),p.borderTop))}},e.cellCount=0,e}(f);e.Cell=m;var M=new l;for(u=0;u<10;u++)M.cells.push(new m(new s.Point(Math.random()*a.width,Math.random()*a.height),50*Math.random()+70,[255*Math.random(),255*Math.random(),255*Math.random()]));for(u=0;u<50;u++)M.food.push(new m(new s.Point(Math.round((p.borderRight-p.borderLeft)*Math.random())+p.borderLeft-1,Math.round((p.borderBottom-p.borderTop)*Math.random())+p.borderTop-1),5,[0,0,0]));!function t(){M.iterate(),setTimeout(t,1e3/60)}()},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=i(0),r=1800,n=700;function s(t,e,i,o,r){return Math.pow(1-r,3)*t+3*r*Math.pow(1-r,2)*e+3*r*r*(1-r)*i+Math.pow(r,3)*o}e.getRandomPositionOnCanvas=function(){return[Math.random()*r,Math.random()*n]},e.bezierCurve=function(t,e,i,o,r){return[s(t[0],e[0],i[0],o[0],r),s(t[1],e[1],i[1],o[1],r)]},e.bezierCurveX=s,e.sineCircleXYatAngle=function(t,e,i,o,r,n){return{x:t+(i+o*Math.sin(n*r))*Math.cos(r),y:e+(i+o*Math.sin(n*r))*Math.sin(r)}},e.toRGB=function(t){return\"RGB(\"+t[0].toString()+\",\"+t[1].toString()+\",\"+t[2].toString()+\")\"};var a=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.isInside=function(){return this.x>=o.setUp.borderLeft&&this.x<=o.setUp.borderRight&&this.y>=o.setUp.borderTop&&this.y<=o.setUp.borderBottom},t.prototype.distanceSquared=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},t}();e.Point=a;var h=function(t,e,i,o){this.objectPointer=t,this.position=e,this.distance=i,this.velocity=o,this.colliding=!1};e.Vertex=h}]);","extractedComments":[]}