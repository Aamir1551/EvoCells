{"code":"!function(t){var e={};function i(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var o in t)i.d(r,o,function(e){return t[e]}.bind(null,o));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"\",i(i.s=0)}([function(t,e,i){\"use strict\";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,\"__esModule\",{value:!0});var n=i(1),s=document.getElementsByTagName(\"canvas\")[0],l=s.getContext(\"2d\"),a=function(){function t(){}return t.square=50,t.width=s.width,t.height=s.height,t.mapwidth=t.width/t.square*t.square,t.mapheight=t.height/t.square*t.square,t.borderLeft=0,t.borderRight=t.mapwidth,t.borderTop=0,t.borderBottom=t.mapheight,t.center=new n.Point(t.mapwidth/2,t.mapheight/2),t.directionX=0,t.directionY=0,t.allVertices=[],t.cells=[],t.sugar=[],t}();e.setUp=a;var c=function(){};e.GameObject=c;var h=function(t){function e(e,i,r){void 0===r&&(r=!0);var o=t.call(this)||this;o.position=e,o.color=i,o.isActive=r,o.vertices=[],o.distanceThreshold=25,o.initialAngle=Math.random()*u.TAU,o.directionX=0,o.directionY=0,o.size=5;for(var s=0;s<Math.ceil(o.size);s++)o.vertices.push(new n.Vertex(o,o.position,o.size,Math.random()-.5));return o}return o(e,t),e.foodCount=0,e.TAU=2*Math.PI,e}(c);e.Sugar=h;var u=function(t){function e(i,r,o,s){void 0===s&&(s=!0);var l=t.call(this)||this;l.position=i,l.size=r,l.color=o,l.isActive=s,l.vertices=[],l.distanceThreshold=25,l.initialAngle=Math.random()*e.TAU,l.directionX=0,l.directionY=0,l.updatePoints(),l.cellID=e.cellCount;for(var a=0;a<Math.ceil(l.size);a++)l.vertices.push(new n.Vertex(l,l.position,l.size,Math.random()-.5));return e.cellCount++,l}return o(e,t),e.prototype.isTouchingOtherCells=function(){for(var t=0;t<a.cells.length;t++){var e=a.cells[t];if(t!=this.cellID&&0!=e.isActive){e.size,this.size,this.position.distanceSquared(e.position);e.size}}var i=a.allVertices[t].cellPointer;(i.size+v.cellPointer.size-v.cellPointer.position.distanceSquared(i.position))/2>=.7*i.size&&\"CELL\"==a.allVertices[t].cellPointer.cellType&&a.allVertices[t].cellPointer.size<v.cellPointer.size&&a.allVertices[t].cellPointer.isActive&&(a.allVertices[t].cellPointer.isActive=!1,v.cellPointer.size=Math.sqrt(Math.pow(v.cellPointer.size,2)+Math.pow(a.allVertices[t].cellPointer.size,2)))},e.prototype.detectCollisionForVertex=function(t){if(0==t.position.isInside())return!0;for(var e=0;e<a.allVertices.length;e++){var i=t.position.distanceSquared(a.allVertices[e].position);if(i<=this.distanceThreshold&&a.allVertices[e].objectPointer.cellID!=t.cellPointer.cellID){i<=this.distanceThreshold/4&&\"FOOD\"==a.allVertices[e].cellPointer.cellType&&a.allVertices[e].cellPointer.isActive&&(a.allVertices[e].cellPointer.isActive=!1,t.cellPointer.size=Math.sqrt((t.cellPointer.size*t.cellPointer.size*Math.PI+10)/Math.PI));var r=a.allVertices[e].cellPointer;return(i=r.size+t.cellPointer.size-t.cellPointer.position.distanceSquared(r.position))/2>=.7*r.size&&\"CELL\"==a.allVertices[e].cellPointer.cellType&&a.allVertices[e].cellPointer.size<t.cellPointer.size&&a.allVertices[e].cellPointer.isActive&&(a.allVertices[e].cellPointer.isActive=!1,t.cellPointer.size=Math.sqrt(Math.pow(t.cellPointer.size,2)+Math.pow(a.allVertices[e].cellPointer.size,2))),!0}}return!1},e.prototype.movePoints=function(){for(var t=this.vertices.length,i=[],r=0;r<this.vertices.length;r++){var o=this.vertices[r];i.push(new n.Vertex(o.cellPointer,new n.Point(o.position.x,o.position.y),o.distance,o.velocity))}for(var s=0;s<i.length;s++){var l=[this.vertices[s],this.vertices[(s-1+t)%t],this.vertices[(s+1)%t]],a=l[0],c=l[1],h=l[2],u=(c.velocity+h.velocity+8*Math.min(Math.max(.7*(a.velocity+Math.random()-.5),-10),10))/10,d=\"CELL\"==this.cellType&&this.detectCollisionForVertex(i[s])?Math.min(u,0)-1:u,p=(c.distance+h.distance+8*(9*Math.max(a.distance+u,0)+this.size)/10)/10,v=e.TAU*s/t+this.initialAngle;this.vertices[s]=new n.Vertex(this,new n.Point(this.position.x+Math.cos(v)*p,this.position.y+Math.sin(v)*p),p,d)}},e.prototype.draw=function(){if(!this.isActive)return!1;var t=new n.Point(a.center.x-a.width/2,a.center.y-a.height/2);this.movePoints(),l.fillStyle=n.toRGB(this.color),l.strokeStyle=n.toRGB(this.color),l.lineWidth=7;var i=this.vertices.length;l.beginPath();for(var r=0;r<i;r++){var o=this.vertices[r].distance,s=e.TAU*r/i+this.initialAngle;l.lineTo(this.position.x+Math.cos(s)*o-t.x,this.position.y+Math.sin(s)*o-t.y)}return l.closePath(),l.fill(),l.stroke(),!0},e.prototype.updatePoints=function(){this.points=[n.getRandomPositionOnCanvas(),n.getRandomPositionOnCanvas(),n.getRandomPositionOnCanvas(),n.getRandomPositionOnCanvas()]},e.prototype.moveXY=function(t){if(!this.isActive)return!1;var e=n.bezierCurve(this.points[0],this.points[1],this.points[2],this.points[3],t),i=e[0],r=e[1],o=[i-a.width/2,r-a.height/2],s=Math.sqrt(o[0]*o[0]+o[1]*o[1]),l=s<100?s/100:1;this.directionX=o[0]/s*l,this.directionY=o[1]/s*l;return this.position=new n.Point(Math.max(Math.min(this.position.x+4*this.directionX,a.borderRight),a.borderLeft),Math.max(Math.min(this.position.y+4*this.directionY,a.borderBottom),a.borderTop)),!0},e.cellCount=0,e.TAU=2*Math.PI,e}(c);e.Cell=u;for(var d=0;d<10;d++)a.cells.push(new u(new n.Point(Math.random()*s.width,Math.random()*s.height),50*Math.random()+70,[255*Math.random(),255*Math.random(),255*Math.random()],\"CELL\"));for(d=0;d<50;d++)sugar.push(new u(new n.Point(Math.round((a.borderRight-a.borderLeft)*Math.random())+a.borderLeft-1,Math.round((a.borderBottom-a.borderTop)*Math.random())+a.borderTop-1),5,[0,0,0]));var p=0;!function t(){var e,i;if((p+=.01)>=1){for(var r=0;r<a.cells.length;r++)a.cells[r].updatePoints();p=0}for(r=0;r<a.cells.length;r++)a.cells[r].moveXY(p);a.center=new n.Point(a.mapwidth/2,a.mapheight/2),function(){var t=new n.Point(a.center.x-a.width/2,a.center.y-a.height/2);l.beginPath(),l.fillStyle=\"white\",l.rect(0,0,a.width,a.height),l.fill(),l.strokeStyle=\"lightgray\",l.lineWidth=1,l.beginPath();for(var e=0;e<Math.floor(a.width/a.square)+1;e++){var i=e*a.square-t.x%a.square;l.moveTo(i,0),l.lineTo(i,a.height)}for(e=0;e<Math.floor(a.height/a.square)+1;e++){i=e*a.square-t.y%a.square;l.moveTo(0,i),l.lineTo(a.width,i)}l.stroke()}(),a.allVertices=[];for(r=0;r<sugar.length;r++)(e=a.allVertices).push.apply(e,sugar[r].vertices);for(r=0;r<a.cells.length;r++)(i=a.allVertices).push.apply(i,a.cells[r].vertices);!function(){l.lineCap=\"round\",a.cells.sort((function(t,e){return t.size>e.size?1:-1}));for(var t=0;t<sugar.length;t++)sugar[t].draw();for(t=0;t<a.cells.length;t++)a.cells[t].draw()}(),setTimeout(t,1e3/60)}()},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=i(0),o=1800,n=700;function s(t,e,i,r,o){return Math.pow(1-o,3)*t+3*o*Math.pow(1-o,2)*e+3*o*o*(1-o)*i+Math.pow(o,3)*r}e.getRandomPositionOnCanvas=function(){return[Math.random()*o,Math.random()*n]},e.bezierCurve=function(t,e,i,r,o){return[s(t[0],e[0],i[0],r[0],o),s(t[1],e[1],i[1],r[1],o)]},e.bezierCurveX=s,e.sineCircleXYatAngle=function(t,e,i,r,o,n){return{x:t+(i+r*Math.sin(n*o))*Math.cos(o),y:e+(i+r*Math.sin(n*o))*Math.sin(o)}},e.toRGB=function(t){return\"RGB(\"+t[0].toString()+\",\"+t[1].toString()+\",\"+t[2].toString()+\")\"};var l=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.isInside=function(){return this.x>=r.setUp.borderLeft&&this.x<=r.setUp.borderRight&&this.y>=r.setUp.borderTop&&this.y<=r.setUp.borderBottom},t.prototype.distanceSquared=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},t}();e.Point=l;var a=function(t,e,i,r){this.objectPointer=t,this.position=e,this.distance=i,this.velocity=r};e.Vertex=a}]);","extractedComments":[]}