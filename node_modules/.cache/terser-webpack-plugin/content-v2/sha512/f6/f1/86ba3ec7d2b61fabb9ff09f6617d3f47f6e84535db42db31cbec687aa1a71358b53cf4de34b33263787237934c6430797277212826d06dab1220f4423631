{"code":"!function(t){var e={};function i(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)i.d(o,r,function(e){return t[e]}.bind(null,r));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"\",i(i.s=0)}([function(t,e,i){\"use strict\";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,\"__esModule\",{value:!0});var n=i(1),s=document.getElementsByTagName(\"canvas\")[0],a=s.getContext(\"2d\"),h=function(){function t(){}return t.square=50,t.width=s.width,t.height=s.height,t.mapwidth=t.width/t.square*t.square,t.mapheight=t.height/t.square*t.square,t.borderLeft=0,t.borderRight=t.mapwidth,t.borderTop=0,t.borderBottom=t.mapheight,t.center=new n.Point(t.mapwidth/2,t.mapheight/2),t.directionX=0,t.directionY=0,t.allVertices=[],t}();e.setUp=h;var l=function(){};e.GameObject=l;var c=function(t){function e(t,e,i){void 0===i&&(i=!0);this.position=t,this.color=e,this.isActive=i,this.vertices=[],this.distanceThreshold=25,this.initialAngle=Math.random()*u.TAU,this.directionX=0,this.directionY=0,this.size=5;for(var o=0;o<Math.ceil(this.size);o++)this.vertices.push(new n.Vertex(this,this.position,this.size,Math.random()-.5));return u.cellCount++,this}return r(e,t),e.foodCount=0,e.TAU=2*Math.PI,e}(l);e.Sugar=c;var u=function(){function t(e,i,o,r,s){void 0===r&&(r=\"FOOD\"),void 0===s&&(s=!0),this.position=e,this.size=i,this.color=o,this.cellType=r,this.isActive=s,this.vertices=[],this.distanceThreshold=25,this.initialAngle=Math.random()*t.TAU,this.directionX=0,this.directionY=0,this.updatePoints(),this.cellID=t.cellCount;for(var a=0;a<Math.ceil(this.size);a++)this.vertices.push(new n.Vertex(this,this.position,this.size,Math.random()-.5));t.cellCount++}return t.prototype.detectCollisionForVertex=function(t){if(0==t.position.isInside())return!0;for(var e=0;e<h.allVertices.length;e++){var i=t.position.distanceSquared(h.allVertices[e].position);if(i<=this.distanceThreshold&&h.allVertices[e].cellPointer.cellID!=t.cellPointer.cellID){i<=this.distanceThreshold/4&&\"FOOD\"==h.allVertices[e].cellPointer.cellType&&h.allVertices[e].cellPointer.isActive&&(h.allVertices[e].cellPointer.isActive=!1,t.cellPointer.size=Math.sqrt((t.cellPointer.size*t.cellPointer.size*Math.PI+10)/Math.PI));var o=h.allVertices[e].cellPointer;return(i=o.size+t.cellPointer.size-t.cellPointer.position.distanceSquared(o.position))/2>=.7*o.size&&\"CELL\"==h.allVertices[e].cellPointer.cellType&&h.allVertices[e].cellPointer.size<t.cellPointer.size&&h.allVertices[e].cellPointer.isActive&&(h.allVertices[e].cellPointer.isActive=!1,t.cellPointer.size=Math.sqrt(Math.pow(t.cellPointer.size,2)+Math.pow(h.allVertices[e].cellPointer.size,2))),!0}}return!1},t.prototype.movePoints=function(){for(var e=this.vertices.length,i=[],o=0;o<this.vertices.length;o++){var r=this.vertices[o];i.push(new n.Vertex(r.cellPointer,new n.Point(r.position.x,r.position.y),r.distance,r.velocity))}for(var s=0;s<i.length;s++){var a=[this.vertices[s],this.vertices[(s-1+e)%e],this.vertices[(s+1)%e]],h=a[0],l=a[1],c=a[2],u=(l.velocity+c.velocity+8*Math.min(Math.max(.7*(h.velocity+Math.random()-.5),-10),10))/10,d=\"CELL\"==this.cellType&&this.detectCollisionForVertex(i[s])?Math.min(u,0)-1:u,p=(l.distance+c.distance+8*(9*Math.max(h.distance+u,0)+this.size)/10)/10,f=t.TAU*s/e+this.initialAngle;this.vertices[s]=new n.Vertex(this,new n.Point(this.position.x+Math.cos(f)*p,this.position.y+Math.sin(f)*p),p,d)}},t.prototype.draw=function(){if(!this.isActive)return!1;var e=new n.Point(h.center.x-h.width/2,h.center.y-h.height/2);this.movePoints(),a.fillStyle=n.toRGB(this.color),a.strokeStyle=n.toRGB(this.color),a.lineWidth=7;var i=this.vertices.length;a.beginPath();for(var o=0;o<i;o++){var r=this.vertices[o].distance,s=t.TAU*o/i+this.initialAngle;a.lineTo(this.position.x+Math.cos(s)*r-e.x,this.position.y+Math.sin(s)*r-e.y)}return a.closePath(),a.fill(),a.stroke(),!0},t.prototype.updatePoints=function(){this.points=[n.getRandomPositionOnCanvas(),n.getRandomPositionOnCanvas(),n.getRandomPositionOnCanvas(),n.getRandomPositionOnCanvas()]},t.prototype.moveXY=function(t){if(!this.isActive)return!1;var e=n.bezierCurve(this.points[0],this.points[1],this.points[2],this.points[3],t),i=e[0],o=e[1],r=[i-h.width/2,o-h.height/2],s=Math.sqrt(r[0]*r[0]+r[1]*r[1]),a=s<100?s/100:1;this.directionX=r[0]/s*a,this.directionY=r[1]/s*a;return this.position=new n.Point(Math.max(Math.min(this.position.x+4*this.directionX,h.borderRight),h.borderLeft),Math.max(Math.min(this.position.y+4*this.directionY,h.borderBottom),h.borderTop)),!0},t.cellCount=0,t.TAU=2*Math.PI,t}();e.Cell=u;for(var d=[],p=0;p<10;p++)d.push(new u(new n.Point(Math.random()*s.width,Math.random()*s.height),50*Math.random()+70,[255*Math.random(),255*Math.random(),255*Math.random()],\"CELL\"));var f=[];for(p=0;p<50;p++)f.push(new u(new n.Point(Math.round((h.borderRight-h.borderLeft)*Math.random())+h.borderLeft-1,Math.round((h.borderBottom-h.borderTop)*Math.random())+h.borderTop-1),5,[0,0,0]));var v=0;!function t(){var e,i;if((v+=.01)>=1){for(var o=0;o<d.length;o++)d[o].updatePoints();v=0}for(o=0;o<d.length;o++)d[o].moveXY(v);h.center=new n.Point(h.mapwidth/2,h.mapheight/2),function(){var t=new n.Point(h.center.x-h.width/2,h.center.y-h.height/2);a.beginPath(),a.fillStyle=\"white\",a.rect(0,0,h.width,h.height),a.fill(),a.strokeStyle=\"lightgray\",a.lineWidth=1,a.beginPath();for(var e=0;e<Math.floor(h.width/h.square)+1;e++){var i=e*h.square-t.x%h.square;a.moveTo(i,0),a.lineTo(i,h.height)}for(e=0;e<Math.floor(h.height/h.square)+1;e++){i=e*h.square-t.y%h.square;a.moveTo(0,i),a.lineTo(h.width,i)}a.stroke()}(),h.allVertices=[];for(o=0;o<f.length;o++)(e=h.allVertices).push.apply(e,f[o].vertices);for(o=0;o<d.length;o++)(i=h.allVertices).push.apply(i,d[o].vertices);!function(){a.lineCap=\"round\",d.sort((function(t,e){return t.size>e.size?1:-1}));for(var t=0;t<f.length;t++)f[t].draw();for(t=0;t<d.length;t++)d[t].draw()}(),setTimeout(t,1e3/60)}()},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=i(0),r=1800,n=700;function s(t,e,i,o,r){return Math.pow(1-r,3)*t+3*r*Math.pow(1-r,2)*e+3*r*r*(1-r)*i+Math.pow(r,3)*o}e.getRandomPositionOnCanvas=function(){return[Math.random()*r,Math.random()*n]},e.bezierCurve=function(t,e,i,o,r){return[s(t[0],e[0],i[0],o[0],r),s(t[1],e[1],i[1],o[1],r)]},e.bezierCurveX=s,e.sineCircleXYatAngle=function(t,e,i,o,r,n){return{x:t+(i+o*Math.sin(n*r))*Math.cos(r),y:e+(i+o*Math.sin(n*r))*Math.sin(r)}},e.toRGB=function(t){return\"RGB(\"+t[0].toString()+\",\"+t[1].toString()+\",\"+t[2].toString()+\")\"};var a=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.isInside=function(){return this.x>=o.setUp.borderLeft&&this.x<=o.setUp.borderRight&&this.y>=o.setUp.borderTop&&this.y<=o.setUp.borderBottom},t.prototype.distanceSquared=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},t}();e.Point=a;var h=function(t,e,i,o){this.cellPointer=t,this.position=e,this.distance=i,this.velocity=o};e.Vertex=h}]);","extractedComments":[]}