{"code":"!function(t){var e={};function o(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=e,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)o.d(i,r,function(e){return t[e]}.bind(null,r));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,\"a\",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p=\"\",o(o.s=2)}([function(t,e,o){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i=1800,r=700;function n(t,e,o,i,r){return Math.pow(1-r,3)*t+3*r*Math.pow(1-r,2)*e+3*r*r*(1-r)*o+Math.pow(r,3)*i}e.getRandomPositionOnCanvas=function(){return[Math.random()*i,Math.random()*r]},e.bezierCurve=function(t,e,o,i,r){return[n(t[0],e[0],o[0],i[0],r),n(t[1],e[1],o[1],i[1],r)]},e.bezierCurveX=n,e.sineCircleXYatAngle=function(t,e,o,i,r,n){return{x:t+(o+i*Math.sin(n*r))*Math.cos(r),y:e+(o+i*Math.sin(n*r))*Math.sin(r)}},e.toRGB=function(t){return\"RGB(\"+t[0].toString()+\",\"+t[1].toString()+\",\"+t[2].toString()+\")\"};var s=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.isInside=function(){return this.x>=h.borderLeft&&this.x<=h.borderRight&&this.y>=h.borderTop&&this.y<=h.borderBottom},t.prototype.distanceSquared=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},t}();e.Point=s;var a=function(t,e,o,i){this.objectPointer=t,this.position=e,this.distance=o,this.velocity=i,this.colliding=!1};e.Vertex=a;var h=function(){function t(){}return t.TAU=2*Math.PI,t.square=50,t.width=i,t.height=r,t.mapwidth=t.width/t.square*t.square,t.mapheight=t.height/t.square*t.square,t.borderLeft=0,t.borderRight=t.mapwidth,t.borderTop=0,t.borderBottom=t.mapheight,t.center=new s(t.mapwidth/2,t.mapheight/2),t.directionX=0,t.directionY=0,t}();e.setUp=h,e.getAverageColor=function(t,e){for(var o=[0,0,0],i=0;i<t.length;i++)o[0]+=Math.pow(t[i][0],2)*e[i],o[1]+=Math.pow(t[i][1],2)*e[i],o[2]+=Math.pow(t[i][2],2)*e[i];return o=[Math.sqrt(o[0]),Math.sqrt(o[1]),Math.sqrt(o[2])]},e.getColorGivenHash=function(t,e,o){for(var i=-1;o>=0;)o-=e[++i];return t[i]}},function(t,e,o){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i=o(0),r=function(){function t(t,e,o){this.position=t,this.color=e,this.size=o,this.vertices=[]}return t.prototype.draw=function(t){var e=new i.Point(i.setUp.center.x-i.setUp.width/2,i.setUp.center.y-i.setUp.height/2);this.movePoints(),t.fillStyle=i.toRGB(this.color),t.strokeStyle=i.toRGB(this.color),t.lineWidth=7;var o=this.vertices.length;t.beginPath();for(var r=0;r<o;r++){var n=this.vertices[r].distance,s=i.setUp.TAU*r/o+this.initialAngle;t.lineTo(this.position.x+Math.cos(s)*n-e.x,this.position.y+Math.sin(s)*n-e.y)}t.closePath(),t.fill(),t.stroke()},t}();e.GameObject=r},function(t,e,o){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i=o(3),r=o(0),n=o(4),s=document.getElementsByTagName(\"canvas\")[0].getContext(\"2d\"),a=function(){function t(t,e,o){var i;void 0===t&&(t=[]),void 0===e&&(e=[]),this.ctx=o,this.food=[],this.cells=[],i=[t,e],this.food=i[0],this.cells=i[1]}return t.prototype.initialize=function(){var t=this;this.cells.forEach((function(e){return e.updatePoints(t.cells,t.food)}))},t.prototype.drawAllObjects=function(){for(var t=0;t<this.food.length;t++)this.food[t].draw(s);this.cells.sort((function(t,e){return t.targetSize-e.targetSize}));for(t=0;t<this.cells.length;t++)this.cells[t].draw(s)},t.prototype.detectAllCellCollisions=function(){var t;this.cells.forEach((function(t){return t.vertices.forEach((function(t){return t.colliding=!1}))})),this.iterateConsume();for(var e=0;e<this.cells.length;e++)for(var o=this.cells[e],i=o.distanceThreshold,r=0;r<o.vertices.length;r++){var n=o.vertices[r];if(1!=n.colliding)if(n.position.isInside()){for(var s=0;s<this.food.length;s++){n.position.distanceSquared(this.food[s].position)<=i&&(this.food.splice(s,1),o.eatFood(10))}for(s=e+1;s<this.cells.length;s++)for(var a=this.cells[s],h=0;h<a.vertices.length;h++){var l=a.vertices[h];l.position.distanceSquared(n.position)<=i&&(t=[!0,!0],n.colliding=t[0],l.colliding=t[1]),a.position.distanceSquared(n.position)}}else n.colliding=!0}},t.prototype.iterateConsume=function(){this.cells.sort((function(t,e){return e.size-t.size})),this.cells.forEach((function(t){return t.looseMass()}));for(var t=0;t<this.cells.length;t++)this.cells[t].targetSize<5&&this.cells.splice(t,1);for(t=0;t<this.cells.length-1;t++)for(var e=this.cells[t],o=t+1;o<this.cells.length;o++){var i=this.cells[o];-(e.position.distanceSquared(i.position)-e.size-i.size)>i.size&&e.size>1.2*i.size&&(e.eatFood(i.size*i.size*Math.PI),this.cells.splice(o,1))}},t.prototype.drawBackground=function(){var t=new r.Point(r.setUp.center.x-r.setUp.width/2,r.setUp.center.y-r.setUp.height/2);s.beginPath(),s.fillStyle=\"white\",s.rect(0,0,r.setUp.width,r.setUp.height),s.fill(),s.strokeStyle=\"lightgray\",s.lineWidth=1,s.beginPath();for(var e=0;e<Math.floor(r.setUp.width/r.setUp.square)+1;e++){var o=e*r.setUp.square-t.x%r.setUp.square;s.moveTo(o,0),s.lineTo(o,r.setUp.height)}for(e=0;e<Math.floor(r.setUp.height/r.setUp.square)+1;e++){o=e*r.setUp.square-t.y%r.setUp.square;s.moveTo(0,o),s.lineTo(r.setUp.width,o)}s.stroke()},t.prototype.iterate=function(){var t=this;r.setUp.center=new r.Point(r.setUp.mapwidth/2,r.setUp.mapheight/2),this.cells.forEach((function(e){return e.updatePoints(t.cells,t.food)})),this.cells.forEach((function(t){return t.moveXY()})),this.food.forEach((function(t){return t.movePoints()})),this.drawBackground(),this.drawAllObjects(),this.detectAllCellCollisions()},t}();e.Environment=a;for(var h=new a([],[],s),l=0;l<40;l++)h.cells.push(new i.Cell(new r.Point(Math.random()*r.setUp.mapwidth,Math.random()*r.setUp.mapheight),20*Math.random()+30,[255*Math.random(),255*Math.random(),255*Math.random()],[Math.random(),Math.random(),Math.random()]));for(l=0;l<800;l++)h.food.push(new n.Sugar(new r.Point(Math.round((r.setUp.borderRight-r.setUp.borderLeft)*Math.random())+r.setUp.borderLeft-1,Math.round((r.setUp.borderBottom-r.setUp.borderTop)*Math.random())+r.setUp.borderTop-1),[0,0,0]));h.initialize(),function t(){h.iterate();for(var e=[],o=0;o<h.cells.length;o++){var i=h.cells[o];if(i.updatePoints(h.cells,h.food),i.size>100){var s=i.split();s[0].movementDirection[0]*=-2,s[0].movementDirection[1]*=-2,s[0].updatePoints(h.cells,h.food),s[1].updatePoints(h.cells,h.food),e.push(s[0]),e.push(s[1])}else e.push(i)}if(h.cells=e,h.food.length<800)for(o=0;o<600;o++)h.food.push(new n.Sugar(new r.Point(Math.round((r.setUp.borderRight-r.setUp.borderLeft)*Math.random())+r.setUp.borderLeft-1,Math.round((r.setUp.borderBottom-r.setUp.borderTop)*Math.random())+r.setUp.borderTop-1),[0,0,0]));setTimeout(t,1e3/60)}()},function(t,e){throw new Error(\"Module parse failed: Unexpected token (72:55)\\nFile was processed with these loaders:\\n * ./node_modules/ts-loader/index.js\\nYou may need an additional loader to handle the result of these loaders.\\n|             var collision = this.vertices[i].colliding;\\n|             var accAdd = collision ? -2 : acc; // Math.min(acc, 0) - 1 : acc;\\n>             collision ? this.movementDirection *= -1 : ;\\n|             var radius = (before.distance + after.distance + 8 * (9 * Math.max(current.distance + acc, 0) + this.size) / 10) / 10;\\n|             var angle = utils_1.setUp.TAU * i / n + this.initialAngle;\")},function(t,e,o){\"use strict\";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,\"__esModule\",{value:!0});var n=o(1),s=o(0),a=function(t){function e(e,o){var i=t.call(this,e,o,5)||this;i.vx=2*Math.random()-1,i.vy=2*Math.random()-1;for(var r=0;r<Math.ceil(i.size);r++)i.vertices.push(new s.Vertex(i,i.position,i.size,Math.random()-.5));return i.initialAngle=Math.random()*s.setUp.TAU,i}return r(e,t),e.prototype.movePoints=function(){this.position.x>1800?this.vx=-1-Math.random():this.position.x<0?this.vx=1+Math.random():this.vx*=1+.005*Math.random(),this.position.y>700?this.vy=-1-Math.random():this.position.y<0?this.vy=1+Math.random():this.vy*=1+.005*Math.random(),this.position.x+=this.vx,this.position.y+=this.vy},e}(n.GameObject);e.Sugar=a}]);","extractedComments":[]}