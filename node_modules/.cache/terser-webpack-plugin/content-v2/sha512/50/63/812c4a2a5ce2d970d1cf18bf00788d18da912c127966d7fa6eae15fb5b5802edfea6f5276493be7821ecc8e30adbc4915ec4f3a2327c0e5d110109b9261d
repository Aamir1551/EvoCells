{"code":"!function(t){var i={};function e(o){if(i[o])return i[o].exports;var n=i[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}e.m=t,e.c=i,e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:o})},e.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&\"object\"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:t}),2&i&&\"string\"!=typeof t)for(var n in t)e.d(o,n,function(i){return t[i]}.bind(null,n));return o},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,\"a\",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p=\"\",e(e.s=2)}([function(t,i,e){\"use strict\";Object.defineProperty(i,\"__esModule\",{value:!0});var o=1800,n=700;function r(t,i,e,o,n){return Math.pow(1-n,3)*t+3*n*Math.pow(1-n,2)*i+3*n*n*(1-n)*e+Math.pow(n,3)*o}i.getRandomPositionOnCanvas=function(){return[Math.random()*o,Math.random()*n]},i.bezierCurve=function(t,i,e,o,n){return[r(t[0],i[0],e[0],o[0],n),r(t[1],i[1],e[1],o[1],n)]},i.bezierCurveX=r,i.sineCircleXYatAngle=function(t,i,e,o,n,r){return{x:t+(e+o*Math.sin(r*n))*Math.cos(n),y:i+(e+o*Math.sin(r*n))*Math.sin(n)}},i.toRGB=function(t){return\"RGB(\"+t[0].toString()+\",\"+t[1].toString()+\",\"+t[2].toString()+\")\"};var s=function(){function t(t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.x=t,this.y=i}return t.prototype.isInside=function(){return this.x>=a.borderLeft&&this.x<=a.borderRight&&this.y>=a.borderTop&&this.y<=a.borderBottom},t.prototype.distanceSquared=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},t}();i.Point=s;var h=function(t,i,e,o){this.objectPointer=t,this.position=i,this.distance=e,this.velocity=o,this.colliding=!1};i.Vertex=h;var a=function(){function t(){}return t.TAU=2*Math.PI,t.square=50,t.width=o,t.height=n,t.mapwidth=t.width/t.square*t.square,t.mapheight=t.height/t.square*t.square,t.borderLeft=0,t.borderRight=t.mapwidth,t.borderTop=0,t.borderBottom=t.mapheight,t.center=new s(t.mapwidth/2,t.mapheight/2),t.directionX=0,t.directionY=0,t}();i.setUp=a,i.getAverageColor=function(t,i){for(var e=[0,0,0],o=0;o<t.length;o++)e[0]+=Math.pow(t[o][0],2)*i[o],e[1]+=Math.pow(t[o][1],2)*i[o],e[2]+=Math.pow(t[o][2],2)*i[o];return e=[Math.sqrt(e[0]),Math.sqrt(e[1]),Math.sqrt(e[2])]},i.getColorGivenHash=function(t,i,e){for(var o=-1;e>=0;)e-=i[++o];return t[o]}},function(t,i,e){\"use strict\";Object.defineProperty(i,\"__esModule\",{value:!0});var o=e(0),n=function(){function t(t,i,e){this.position=t,this.color=i,this.size=e,this.vertices=[]}return t.prototype.draw=function(t){var i=new o.Point(o.setUp.center.x-o.setUp.width/2,o.setUp.center.y-o.setUp.height/2);this.movePoints(),t.fillStyle=o.toRGB(this.color),t.strokeStyle=o.toRGB(this.color),t.lineWidth=7;var e=this.vertices.length;t.beginPath();for(var n=0;n<e;n++){var r=this.vertices[n].distance,s=o.setUp.TAU*n/e+this.initialAngle;t.lineTo(this.position.x+Math.cos(s)*r-i.x,this.position.y+Math.sin(s)*r-i.y)}t.closePath(),t.fill(),t.stroke()},t}();i.GameObject=n},function(t,i,e){\"use strict\";Object.defineProperty(i,\"__esModule\",{value:!0});var o=e(3),n=e(0),r=e(4),s=document.getElementsByTagName(\"canvas\")[0],h=s.getContext(\"2d\"),a=function(){function t(t,i,e){var o;void 0===t&&(t=[]),void 0===i&&(i=[]),this.ctx=e,this.food=[],this.cells=[],o=[t,i],this.food=o[0],this.cells=o[1]}return t.prototype.initialize=function(){var t=this;this.cells.forEach((function(i){return i.updatePoints(t.cells,t.food)}))},t.prototype.drawAllObjects=function(){for(var t=0;t<this.food.length;t++)this.food[t].draw(h);this.cells.sort((function(t,i){return t.targetSize-i.targetSize}));for(t=0;t<this.cells.length;t++)this.cells[t].draw(h)},t.prototype.detectAllCellCollisions=function(){var t;this.cells.forEach((function(t){return t.vertices.forEach((function(t){return t.colliding=!1}))})),this.iterateConsume();for(var i=0;i<this.cells.length;i++)for(var e=this.cells[i],o=e.distanceThreshold,n=0;n<e.vertices.length;n++){var r=e.vertices[n];if(1!=r.colliding)if(r.position.isInside()){for(var s=0;s<this.food.length;s++){r.position.distanceSquared(this.food[s].position)<=o&&(this.food.splice(s,1),e.eatFood(10))}for(s=i+1;s<this.cells.length;s++)for(var h=this.cells[s],a=0;a<h.vertices.length;a++){var c=h.vertices[a];c.position.distanceSquared(r.position)<=o&&(t=[!0,!0],r.colliding=t[0],c.colliding=t[1]),h.position.distanceSquared(r.position)}}else r.colliding=!0}},t.prototype.iterateConsume=function(){this.cells.sort((function(t,i){return i.size-t.size})),this.cells.forEach((function(t){return t.looseMass()}));for(var t=0;t<this.cells.length;t++)this.cells[t].targetSize<5&&this.cells.splice(t,1);for(t=0;t<this.cells.length-1;t++)for(var i=this.cells[t],e=t+1;e<this.cells.length;e++){var o=this.cells[e];-(i.position.distanceSquared(o.position)-i.size-o.size)>o.size&&i.size>1.2*o.size&&(i.eatFood(o.size*o.size*Math.PI),this.cells.splice(e,1))}},t.prototype.drawBackground=function(){var t=new n.Point(n.setUp.center.x-n.setUp.width/2,n.setUp.center.y-n.setUp.height/2);h.beginPath(),h.fillStyle=\"white\",h.rect(0,0,n.setUp.width,n.setUp.height),h.fill(),h.strokeStyle=\"lightgray\",h.lineWidth=1,h.beginPath();for(var i=0;i<Math.floor(n.setUp.width/n.setUp.square)+1;i++){var e=i*n.setUp.square-t.x%n.setUp.square;h.moveTo(e,0),h.lineTo(e,n.setUp.height)}for(i=0;i<Math.floor(n.setUp.height/n.setUp.square)+1;i++){e=i*n.setUp.square-t.y%n.setUp.square;h.moveTo(0,e),h.lineTo(n.setUp.width,e)}h.stroke()},t.prototype.iterate=function(){var t=this;n.setUp.center=new n.Point(n.setUp.mapwidth/2,n.setUp.mapheight/2),this.cells.forEach((function(i){return i.updatePoints(t.cells,t.food)})),this.cells.forEach((function(t){return t.moveXY()})),this.food.forEach((function(t){return t.movePoints()})),this.drawBackground(),this.drawAllObjects(),this.detectAllCellCollisions()},t}();i.Environment=a;for(var c=new a([],[],h),l=0;l<40;l++)c.cells.push(new o.Cell(new n.Point(Math.random()*n.setUp.mapwidth,Math.random()*n.setUp.mapheight),20*Math.random()+30,[255*Math.random(),255*Math.random(),255*Math.random()],[Math.random(),Math.random(),Math.random()]));for(l=0;l<800;l++)c.food.push(new r.Sugar(new n.Point(Math.round((n.setUp.borderRight-n.setUp.borderLeft)*Math.random())+n.setUp.borderLeft-1,Math.round((n.setUp.borderBottom-n.setUp.borderTop)*Math.random())+n.setUp.borderTop-1),[0,0,0]));c.initialize(),h.font=\"bold 30px Arial\",h.fillStyle=\"black\",h.fillText(\"Cell Count: \"+c.cells.length.toString(),s.width-550,s.height/2-270)},function(t,i,e){\"use strict\";var o,n=this&&this.__extends||(o=function(t,i){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}o(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,\"__esModule\",{value:!0});var r=e(0),s=function(t){function i(e,o,n,s,h){void 0===h&&(h=o);var a=t.call(this,e,n,o)||this;a.DNA=s,a.targetSize=h,a.distanceThreshold=25,a.initialAngle=Math.random()*r.setUp.TAU,a.directionX=0,a.directionY=0,a.movementDirection=[0,0],a.splitting=[-1,[0,0]],a.cellID=i.cellCount;for(var c=0;c<Math.ceil(a.size);c++)a.vertices.push(new r.Vertex(a,a.position,a.size,Math.random()-.5));return i.cellCount++,a.color=r.getAverageColor([[255,0,0],[0,255,0],[0,0,255]],a.DNA),a}return n(i,t),i.prototype.looseMass=function(){this.targetSize=Math.sqrt((Math.pow(this.targetSize,2)*Math.PI-10*(1-this.DNA[1]))/Math.PI)},i.prototype.eatFood=function(t){this.targetSize=Math.sqrt((Math.pow(this.targetSize,2)*Math.PI+t*this.DNA[1])/Math.PI)},i.prototype.split=function(){var t=Math.sqrt(Math.pow(this.targetSize,2)*Math.PI/2/Math.PI),e=new i(this.position,this.size,this.color,this.getDNAMutated()),o=new i(this.position,this.size,this.color,this.getDNAMutated());return e.targetSize=t,o.targetSize=t,e.splitting=[100,[-1*this.movementDirection[0],-1*this.movementDirection[1]]],[e,o]},i.prototype.getDNAMutated=function(){var t=this.DNA,i=t[0],e=t[1],o=t[2];return[i=Math.max(Math.min(i+Math.random()/10,1),0),e=Math.max(Math.min(e+Math.random()/10,1),0),o=Math.max(Math.min(o+Math.random()/10,1),0)]},i.prototype.movePoints=function(){for(var t=this.vertices.length,i=0;i<this.vertices.length;i++){this.size+=.9*(this.targetSize-this.size);var e=[this.vertices[i],this.vertices[(i-1+t)%t],this.vertices[(i+1)%t]],o=e[0],n=e[1],s=e[2],h=(n.velocity+s.velocity+8*Math.min(Math.max(.7*(o.velocity+Math.random()-.5),-10),10))/10,a=this.vertices[i].colliding?Math.min(h,0)-1:h,c=(n.distance+s.distance+8*(9*Math.max(o.distance+h,0)+this.size)/10)/10,l=r.setUp.TAU*i/t+this.initialAngle;this.vertices[i]=new r.Vertex(this,new r.Point(this.position.x+Math.cos(l)*c,this.position.y+Math.sin(l)*c),c,a)}},i.prototype.updatePoints=function(t,i){if(this.splitting[0]>0)return this.splitting[0]--,void(this.movementDirection=this.splitting[1]);for(var e=[0,0],o=300*this.DNA[2],n=0;n<t.length;n++){(r=Math.max(t[n].position.distanceSquared(this.position)-t[n].size-this.size,1e-5))<=o&&(1.2*t[n].size<this.size&&(o=r,e[0]=t[n].position.x-this.position.x,e[1]=t[n].position.y-this.position.y),t[n].size>1.2*this.size&&(o=r,e[0]=-1*(t[n].position.x-this.position.x),e[1]=-1*(t[n].position.y-this.position.y)))}if(e.toString()==[0,0].toString()){for(n=0;n<i.length;n++){var r;(r=Math.max(i[n].position.distanceSquared(this.position)-this.size,1e-4))<=o&&(e[0]+=i[n].position.x-this.position.x,e[1]+=i[n].position.y-this.position.y)}e.toString()==[0,0].toString()||(this.movementDirection=[e[0]+this.movementDirection[0],e[1]+this.movementDirection[1]])}else this.movementDirection=e},i.prototype.moveXY=function(){var t=5*this.DNA[0],i=Math.max(Math.sqrt(Math.pow(this.movementDirection[0],2)+Math.pow(this.movementDirection[1],2)),1e-5);this.movementDirection=[this.movementDirection[0]/i,this.movementDirection[1]/i],this.directionX=Math.max(Math.min(this.movementDirection[0]*t,10),-10),this.directionY=Math.max(Math.min(this.movementDirection[1]*t,10),-10),this.position=new r.Point(Math.max(Math.min(this.position.x+this.directionX,r.setUp.borderRight),r.setUp.borderLeft),Math.max(Math.min(this.position.y+this.directionY,r.setUp.borderBottom),r.setUp.borderTop))},i.prototype.drawSense=function(t){t.beginPath(),t.fillStyle=\"rgb(255,0,0, 0.4)\",t.strokeStyle=\"rgb(255,0,0, 0.4)\",t.stroke(),t.lineWidth=1,t.arc(this.position.x,this.position.y,300*this.DNA[2]+this.size,0,2*Math.PI),t.fill(),t.stroke()},i.prototype.draw=function(i){this.drawSense(i),t.prototype.draw.call(this,i)},i.cellCount=0,i}(e(1).GameObject);i.Cell=s},function(t,i,e){\"use strict\";var o,n=this&&this.__extends||(o=function(t,i){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}o(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,\"__esModule\",{value:!0});var r=e(1),s=e(0),h=function(t){function i(i,e){var o=t.call(this,i,e,5)||this;o.vx=2*Math.random()-1,o.vy=2*Math.random()-1;for(var n=0;n<Math.ceil(o.size);n++)o.vertices.push(new s.Vertex(o,o.position,o.size,Math.random()-.5));return o.initialAngle=Math.random()*s.setUp.TAU,o}return n(i,t),i.prototype.movePoints=function(){this.position.x>1800?this.vx=-1-Math.random():this.position.x<0?this.vx=1+Math.random():this.vx*=1+.005*Math.random(),this.position.y>700?this.vy=-1-Math.random():this.position.y<0?this.vy=1+Math.random():this.vy*=1+.005*Math.random(),this.position.x+=this.vx,this.position.y+=this.vy},i}(r.GameObject);i.Sugar=h}]);","extractedComments":[]}