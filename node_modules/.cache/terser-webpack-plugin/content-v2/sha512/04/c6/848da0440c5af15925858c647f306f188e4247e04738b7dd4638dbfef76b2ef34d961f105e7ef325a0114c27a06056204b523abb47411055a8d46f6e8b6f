{"code":"!function(t){var i={};function e(s){if(i[s])return i[s].exports;var o=i[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},e.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&\"object\"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,\"default\",{enumerable:!0,value:t}),2&i&&\"string\"!=typeof t)for(var o in t)e.d(s,o,function(i){return t[i]}.bind(null,o));return s},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,\"a\",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p=\"\",e(e.s=1)}([function(t,i,e){\"use strict\";Object.defineProperty(i,\"__esModule\",{value:!0});var s=e(3),o=1800,r=700;function n(t,i,e,s,o){return Math.pow(1-o,3)*t+3*o*Math.pow(1-o,2)*i+3*o*o*(1-o)*e+Math.pow(o,3)*s}i.getRandomPositionOnCanvas=function(){return[Math.random()*o,Math.random()*r]},i.bezierCurve=function(t,i,e,s,o){return[n(t[0],i[0],e[0],s[0],o),n(t[1],i[1],e[1],s[1],o)]},i.bezierCurveX=n,i.sineCircleXYatAngle=function(t,i,e,s,o,r){return{x:t+(e+s*Math.sin(r*o))*Math.cos(o),y:i+(e+s*Math.sin(r*o))*Math.sin(o)}},i.toRGB=function(t){return\"RGB(\"+t[0].toString()+\",\"+t[1].toString()+\",\"+t[2].toString()+\")\"};var h=function(){function t(t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.x=t,this.y=i}return t.prototype.isInside=function(){return this.x>=s.setUp.borderLeft&&this.x<=s.setUp.borderRight&&this.y>=s.setUp.borderTop&&this.y<=s.setUp.borderBottom},t.prototype.distanceSquared=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},t}();i.Point=h;var a=function(t,i,e,s){this.cellPointer=t,this.position=i,this.distance=e,this.velocity=s};i.Vertex=a},function(t,i,e){\"use strict\";Object.defineProperty(i,\"__esModule\",{value:!0});var s,o=e(2),r=e(0),n=function(){function t(t,i){this.numCells=t,this.canvas=i,this.cells=[],this.petriDish=[];for(var e=0;e<t;e++)this.cells.push(new o.Cell([Math.random(),Math.random(),Math.random(),Math.random()],[\"#000000\",\"#FF0000\",\"#FFFF00\",\"#d54dff\"]));this.addFoodToPlace(100)}return t.prototype.addFoodToPlace=function(t){for(var i=0;i<t;i++){var e=[\"#000000\",\"#FF0000\",\"FFFF00\"][Math.round(2*Math.random())],s=r.getRandomPositionOnCanvas();this.petriDish.push([e,s[0],s[1],Math.random(),Math.random(),3*Math.random()+1])}},t.prototype.updatePetri=function(){for(var t=0;t<this.cells.length;t++)for(var i=0;i<this.petriDish.length;i++)Math.sqrt(Math.pow(this.cells[t].position[0]-this.petriDish[i][1],2)+Math.pow(this.cells[t].position[1]-this.petriDish[i][2],2))<this.cells[t].mass+4&&(this.cells[t].foodCollected++,this.petriDish.splice(i,1))},t.prototype.detectCollisions=function(){for(var t=[],i=0;i<this.cells.length-1;i++)for(var e=i+1;e<this.cells.length;e++)Math.sqrt(Math.pow(this.cells[i].position[0]-this.cells[e].position[0],2)+Math.pow(this.cells[i].position[1]-this.cells[e].position[1],2))-this.cells[i].mass-this.cells[e].mass<.4*-Math.min(this.cells[i].mass,this.cells[e].mass)&&t.push([this.cells[i],this.cells[e]]);return t},t.prototype.iterate=function(){this.canvas.getContext(\"2d\").fillStyle=\"#d2d6d6\",this.canvas.getContext(\"2d\").fillRect(0,0,this.canvas.width,this.canvas.height);var t=this.detectCollisions();this.updatePetri();for(var i=0;i<this.petriDish.length;i++){this.petriDish[i][1]+=this.petriDish[i][3],this.petriDish[i][2]+=this.petriDish[i][4],this.petriDish[i][1]>1800?this.petriDish[i][3]=-1:this.petriDish[i][1]<0?this.petriDish[i][3]=1:this.petriDish[i][3]*=1+.005*Math.random(),this.petriDish[i][2]>700?this.petriDish[i][4]=-1:this.petriDish[i][2]<0?this.petriDish[i][4]=1:this.petriDish[i][4]*=1+.005*Math.random();var e=this.canvas.getContext(\"2d\");e.beginPath(),e.arc(this.petriDish[i][1],this.petriDish[i][2],this.petriDish[i][5],0,2*Math.PI),e.fillStyle=this.petriDish[i][0],e.closePath(),e.fill()}for(i=0;i<this.cells.length;i++){if(this.cells[i].move(),this.cells[i].foodCollected>300){var s=this.cells[i].cellDivide(),r=s[0],n=s[1];this.cells.push(r),this.cells.push(n),this.cells.splice(i,1)}this.cells[i].isAlive?this.cells[i].draw(this.canvas):this.cells.splice(i,1)}for(i=0;i<t.length;i++)o.Cell.fight(t[i][0],t[i][1]);setTimeout(this.iterate.bind(this),1e3/60)},t}();s=document.getElementsByTagName(\"canvas\")[0],new n(10,s).iterate()},function(t,i,e){\"use strict\";Object.defineProperty(i,\"__esModule\",{value:!0});var s=e(0),o=function(){function t(t,i){this.DNA=t,this.DNAcolors=i,this.health=100,this.foodCollected=50,this.DNAMagnitude=0,this.position=s.getRandomPositionOnCanvas(),this.isAlive=!0,this.covered=0,this.p0=this.position,this.p1=s.getRandomPositionOnCanvas(),this.p2=s.getRandomPositionOnCanvas(),this.p3=s.getRandomPositionOnCanvas(),this.color=[Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random())],this.mass=5;for(var e=0;e<this.DNA.length;e++)this.DNAMagnitude+=this.DNA[e];this.mass=50,this.targetMass=50,this.foodCollected=50}return t.prototype.useEnergy=function(){var t=this.DNA,i=t[0],e=t[1],s=t[2],o=t[3],r=this.foodCollected/this.DNAMagnitude*o;this.speed=i*r,this.immuneStrength=e*r,this.mass=Math.sqrt(r)*s,this.foodCollected-=.02},t.prototype.cellDivide=function(){var i=new t(this.DNA,this.DNAcolors),e=new t(this.DNA,this.DNAcolors);return i.mass=this.mass,e.mass=this.mass,i.targetMass=this.mass/2,e.targetMass=this.mass/2,i.foodCollected=this.foodCollected/2,e.foodCollected=this.foodCollected/2,i.position=this.position,e.position=this.position,this.isAlive=!1,[i,e]},t.prototype.eatCell=function(t){this.foodCollected+=t.getProteinValue(),t.isAlive=!1},t.prototype.draw=function(t){var i=t.getContext(\"2d\");i.beginPath();for(var e=0;e<360;e++){var o=e*Math.PI/180,r=s.sineCircleXYatAngle(this.position[0],this.position[1],this.mass,(3+1.8*Math.random())/100*this.mass,o,5);i.lineTo(r.x,r.y)}i.closePath(),i.stroke(),i.fillStyle=\"rgb(\"+this.color[0].toString()+\",\"+this.color[1].toString()+\",\"+this.color[2].toString()+\")\",i.fill(),i.lineWidth=.27*this.mass,i.strokeStyle=\"rgb(\"+this.color[0].toString()+\",\"+this.color[1].toString()+\",\"+this.color[2].toString()+\")\",console.log(i.fillStyle,i.strokeStyle)},t.prototype.drawDNA=function(t){for(var i=[0],e=0;e<this.DNA.length;e++)i.push(this.DNA[e]*Math.PI*2/this.DNAMagnitude+i[e]),this.drawBorder(t,this.DNAcolors[e],i[e],i[e+1],2)},t.prototype.drawBorder=function(t,i,e,s,o){void 0===e&&(e=0),void 0===s&&(s=2*Math.PI);var r=t.getContext(\"2d\");r.beginPath(),r.arc(this.position[0],this.position[1],this.mass,e,s),r.strokeStyle=i,r.lineWidth=o,r.stroke(),r.closePath()},t.fight=function(t,i){t.mass>1*i.mass?t.eatCell(i):i.mass>1*t.mass&&i.eatCell(t)},t.prototype.getProteinValue=function(){return.7*this.mass},t.prototype.move=function(){this.useEnergy(),this.isAlive=this.mass>0&&this.targetMass>0,this.covered>.8&&(this.covered=0),this.mass+=.9*(this.targetMass-this.mass),0==this.covered&&(this.p0=this.position,this.p1=this.p3,this.p2=s.getRandomPositionOnCanvas(),this.p3=s.getRandomPositionOnCanvas()),this.covered+=.001*this.speed/this.mass,this.position=s.bezierCurve(this.p0,this.p1,this.p2,this.p3,this.covered)},t}();i.Cell=o},function(t,i,e){\"use strict\";Object.defineProperty(i,\"__esModule\",{value:!0});var s=e(0),o=document.getElementsByTagName(\"canvas\")[0],r=o.getContext(\"2d\"),n=function(){function t(){}return t.square=50,t.width=o.width,t.height=o.height,t.mapwidth=t.width/t.square*t.square,t.mapheight=t.height/t.square*t.square,t.borderLeft=0,t.borderRight=t.mapwidth,t.borderTop=0,t.borderBottom=t.mapheight,t.center=new s.Point(t.mapwidth/2,t.mapheight/2),t.directionX=0,t.directionY=0,t.allVertices=[],t}();i.setUp=n;var h=function(){};i.Sugar=h;var a=function(){function t(i,e,o,r,n){void 0===r&&(r=\"FOOD\"),void 0===n&&(n=!0),this.position=i,this.size=e,this.color=o,this.cellType=r,this.isActive=n,this.vertices=[],this.distanceThreshold=25,this.initialAngle=Math.random()*t.TAU,this.directionX=0,this.directionY=0,this.updatePoints(),this.cellID=t.cellCount;for(var h=0;h<Math.ceil(this.size);h++)this.vertices.push(new s.Vertex(this,this.position,this.size,Math.random()-.5));t.cellCount++}return t.prototype.detectCollisionForVertex=function(t){if(0==t.position.isInside())return!0;for(var i=0;i<n.allVertices.length;i++){var e=t.position.distanceSquared(n.allVertices[i].position);if(e<=this.distanceThreshold&&n.allVertices[i].cellPointer.cellID!=t.cellPointer.cellID)return e<=this.distanceThreshold/4&&\"FOOD\"==n.allVertices[i].cellPointer.cellType&&n.allVertices[i].cellPointer.isActive&&(n.allVertices[i].cellPointer.isActive=!1,t.cellPointer.size=Math.sqrt((t.cellPointer.size*t.cellPointer.size*Math.PI+10)/Math.PI)),e<=this.distanceThreshold/2&&\"CELL\"==n.allVertices[i].cellPointer.cellType&&n.allVertices[i].cellPointer.size<t.cellPointer.size&&n.allVertices[i].cellPointer.isActive&&(n.allVertices[i].cellPointer.isActive=!1,t.cellPointer.size=Math.sqrt(Math.pow(t.cellPointer.size,2)+Math.pow(n.allVertices[i].cellPointer.size,2))),!0}return!1},t.prototype.movePoints=function(){for(var i=this.vertices.length,e=[],o=0;o<this.vertices.length;o++){var r=this.vertices[o];e.push(new s.Vertex(r.cellPointer,new s.Point(r.position.x,r.position.y),r.distance,r.velocity))}for(var n=0;n<e.length;n++){var h=[this.vertices[n],this.vertices[(n-1+i)%i],this.vertices[(n+1)%i]],a=h[0],l=h[1],c=h[2],d=(l.velocity+c.velocity+8*Math.min(Math.max(.7*(a.velocity+Math.random()-.5),-10),10))/10,p=\"CELL\"==this.cellType&&this.detectCollisionForVertex(e[n])?Math.min(d,0)-1:d,u=(l.distance+c.distance+8*(9*Math.max(a.distance+d,0)+this.size)/10)/10,f=t.TAU*n/i+this.initialAngle;this.vertices[n]=new s.Vertex(this,new s.Point(this.position.x+Math.cos(f)*u,this.position.y+Math.sin(f)*u),u,p)}},t.prototype.draw=function(){if(!this.isActive)return!1;var i=new s.Point(n.center.x-n.width/2,n.center.y-n.height/2);this.movePoints(),r.fillStyle=s.toRGB(this.color),r.strokeStyle=s.toRGB(this.color),r.lineWidth=7;var e=this.vertices.length;r.beginPath();for(var o=0;o<e;o++){var h=this.vertices[o].distance,a=t.TAU*o/e+this.initialAngle;r.lineTo(this.position.x+Math.cos(a)*h-i.x,this.position.y+Math.sin(a)*h-i.y)}return r.closePath(),r.fill(),r.stroke(),!0},t.prototype.updatePoints=function(){this.points=[s.getRandomPositionOnCanvas(),s.getRandomPositionOnCanvas(),s.getRandomPositionOnCanvas(),s.getRandomPositionOnCanvas()]},t.prototype.moveXY=function(t){if(!this.isActive)return!1;var i=s.bezierCurve(this.points[0],this.points[1],this.points[2],this.points[3],t),e=i[0],o=i[1],r=[e-n.width/2,o-n.height/2],h=Math.sqrt(r[0]*r[0]+r[1]*r[1]),a=h<100?h/100:1;this.directionX=r[0]/h*a,this.directionY=r[1]/h*a;return this.position=new s.Point(Math.max(Math.min(this.position.x+4*this.directionX,n.borderRight),n.borderLeft),Math.max(Math.min(this.position.y+4*this.directionY,n.borderBottom),n.borderTop)),!0},t.cellCount=0,t.TAU=2*Math.PI,t}();i.Cell=a;for(var l=[],c=0;c<10;c++)l.push(new a(new s.Point(Math.random()*o.width,Math.random()*o.height),50*Math.random()+70,[255*Math.random(),255*Math.random(),255*Math.random()],\"CELL\"));var d=[];for(c=0;c<50;c++)d.push(new a(new s.Point(Math.round((n.borderRight-n.borderLeft)*Math.random())+n.borderLeft-1,Math.round((n.borderBottom-n.borderTop)*Math.random())+n.borderTop-1),5,[0,0,0]));var p=0;!function t(){var i,e;if((p+=.01)>=1){for(var o=0;o<l.length;o++)l[o].updatePoints();p=0}for(o=0;o<l.length;o++)l[o].moveXY(p);n.center=new s.Point(n.mapwidth/2,n.mapheight/2),function(){var t=new s.Point(n.center.x-n.width/2,n.center.y-n.height/2);r.beginPath(),r.fillStyle=\"white\",r.rect(0,0,n.width,n.height),r.fill(),r.strokeStyle=\"lightgray\",r.lineWidth=1,r.beginPath();for(var i=0;i<Math.floor(n.width/n.square)+1;i++){var e=i*n.square-t.x%n.square;r.moveTo(e,0),r.lineTo(e,n.height)}for(i=0;i<Math.floor(n.height/n.square)+1;i++){e=i*n.square-t.y%n.square;r.moveTo(0,e),r.lineTo(n.width,e)}r.stroke()}(),n.allVertices=[];for(o=0;o<d.length;o++)(i=n.allVertices).push.apply(i,d[o].vertices);for(o=0;o<l.length;o++)(e=n.allVertices).push.apply(e,l[o].vertices);!function(){r.lineCap=\"round\",l.sort((function(t,i){return t.size>i.size?1:-1}));for(var t=0;t<d.length;t++)d[t].draw();for(t=0;t<l.length;t++)l[t].draw()}(),setTimeout(t,1e3/60)}()}]);","extractedComments":[]}