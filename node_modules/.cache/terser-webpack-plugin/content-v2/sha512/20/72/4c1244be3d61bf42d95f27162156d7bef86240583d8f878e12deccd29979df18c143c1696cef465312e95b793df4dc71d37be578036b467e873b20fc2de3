{"code":"!function(t){var e={};function i(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)i.d(o,r,function(e){return t[e]}.bind(null,r));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"\",i(i.s=2)}([function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=1800,r=700;function n(t,e,i,o,r){return Math.pow(1-r,3)*t+3*r*Math.pow(1-r,2)*e+3*r*r*(1-r)*i+Math.pow(r,3)*o}e.getRandomPositionOnCanvas=function(){return[Math.random()*o,Math.random()*r]},e.bezierCurve=function(t,e,i,o,r){return[n(t[0],e[0],i[0],o[0],r),n(t[1],e[1],i[1],o[1],r)]},e.bezierCurveX=n,e.sineCircleXYatAngle=function(t,e,i,o,r,n){return{x:t+(i+o*Math.sin(n*r))*Math.cos(r),y:e+(i+o*Math.sin(n*r))*Math.sin(r)}},e.toRGB=function(t){return\"RGB(\"+t[0].toString()+\",\"+t[1].toString()+\",\"+t[2].toString()+\")\"};var s=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.isInside=function(){return this.x>=h.borderLeft&&this.x<=h.borderRight&&this.y>=h.borderTop&&this.y<=h.borderBottom},t.prototype.distanceSquared=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},t}();e.Point=s;var a=function(t,e,i,o){this.objectPointer=t,this.position=e,this.distance=i,this.velocity=o,this.colliding=!1};e.Vertex=a;var h=function(){function t(){}return t.TAU=2*Math.PI,t.square=50,t.width=o,t.height=r,t.mapwidth=t.width/t.square*t.square,t.mapheight=t.height/t.square*t.square,t.borderLeft=0,t.borderRight=t.mapwidth,t.borderTop=0,t.borderBottom=t.mapheight,t.center=new s(t.mapwidth/2,t.mapheight/2),t.directionX=0,t.directionY=0,t}();e.setUp=h,e.getAverageColor=function(t,e){for(var i=[0,0,0],o=0;o<t.length;o++)i[0]+=Math.pow(t[o][0],2)*e[o],i[1]+=Math.pow(t[o][1],2)*e[o],i[2]+=Math.pow(t[o][2],2)*e[o];return i=[Math.sqrt(i[0]),Math.sqrt(i[1]),Math.sqrt(i[2])]},e.getColorGivenHash=function(t,e,i){for(var o=-1;i>=0;)i-=e[++o];return t[o]}},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=i(0),r=function(){function t(t,e,i){this.position=t,this.color=e,this.size=i,this.vertices=[]}return t.prototype.draw=function(t){var e=new o.Point(o.setUp.center.x-o.setUp.width/2,o.setUp.center.y-o.setUp.height/2);this.movePoints(),t.fillStyle=o.toRGB(this.color),t.strokeStyle=o.toRGB(this.color),t.lineWidth=7;var i=this.vertices.length;t.beginPath();for(var r=0;r<i;r++){var n=this.vertices[r].distance,s=o.setUp.TAU*r/i+this.initialAngle;t.lineTo(this.position.x+Math.cos(s)*n-e.x,this.position.y+Math.sin(s)*n-e.y)}t.closePath(),t.fill(),t.stroke()},t}();e.GameObject=r},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=i(3),r=i(0),n=i(4),s=document.getElementsByTagName(\"canvas\")[0].getContext(\"2d\"),a=function(){function t(t,e,i){var o;void 0===t&&(t=[]),void 0===e&&(e=[]),this.ctx=i,this.food=[],this.cells=[],this.timeCounter=0,o=[t,e],this.food=o[0],this.cells=o[1]}return t.prototype.initialize=function(){var t=this;this.cells.forEach((function(e){return e.updatePoints(t.cells,t.food)}))},t.prototype.drawAllObjects=function(){for(var t=0;t<this.food.length;t++)this.food[t].draw(s);this.cells.sort((function(t,e){return t.targetSize-e.targetSize}));for(t=0;t<this.cells.length;t++)this.cells[t].draw(s)},t.prototype.detectAllCellCollisions=function(){var t;this.cells.forEach((function(t){return t.vertices.forEach((function(t){return t.colliding=!1}))})),this.iterateConsume();for(var e=0;e<this.cells.length;e++)for(var i=this.cells[e],o=i.distanceThreshold,r=0;r<i.vertices.length;r++){var n=i.vertices[r];if(1!=n.colliding)if(n.position.isInside()){for(var s=0;s<this.food.length;s++){n.position.distanceSquared(this.food[s].position)<=o&&(this.food.splice(s,1),i.eatFood(10))}for(s=e+1;s<this.cells.length;s++)for(var a=this.cells[s],h=0;h<a.vertices.length;h++){var c=a.vertices[h];c.position.distanceSquared(n.position)<=o&&(t=[!0,!0],n.colliding=t[0],c.colliding=t[1]),a.position.distanceSquared(n.position)}}else n.colliding=!0}},t.prototype.iterateConsume=function(){this.cells.sort((function(t,e){return e.size-t.size})),this.cells.forEach((function(t){return t.looseMass()}));for(var t=0;t<this.cells.length;t++)this.cells[t].targetSize<5&&this.cells.splice(t,1);for(t=0;t<this.cells.length-1;t++)for(var e=this.cells[t],i=t+1;i<this.cells.length;i++){var o=this.cells[i];-(e.position.distanceSquared(o.position)-e.size-o.size)>o.size&&e.size>1.2*o.size&&(e.eatFood(o.size*o.size*Math.PI),this.cells.splice(i,1))}},t.prototype.drawBackground=function(){var t=new r.Point(r.setUp.center.x-r.setUp.width/2,r.setUp.center.y-r.setUp.height/2);s.beginPath(),s.fillStyle=\"white\",s.rect(0,0,r.setUp.width,r.setUp.height),s.fill(),s.strokeStyle=\"lightgray\",s.lineWidth=1,s.beginPath();for(var e=0;e<Math.floor(r.setUp.width/r.setUp.square)+1;e++){var i=e*r.setUp.square-t.x%r.setUp.square;s.moveTo(i,0),s.lineTo(i,r.setUp.height)}for(e=0;e<Math.floor(r.setUp.height/r.setUp.square)+1;e++){i=e*r.setUp.square-t.y%r.setUp.square;s.moveTo(0,i),s.lineTo(r.setUp.width,i)}s.stroke()},t.prototype.iterate=function(){var t=this;r.setUp.center=new r.Point(r.setUp.mapwidth/2,r.setUp.mapheight/2),this.timeCounter+=.01,this.timeCounter>=1&&(this.cells.forEach((function(e){return e.updatePoints(t.cells,t.food)})),this.timeCounter=0),this.cells.forEach((function(e){return e.moveXY(t.timeCounter)}));this.drawBackground(),this.drawAllObjects(),this.detectAllCellCollisions()},t}();e.Environment=a;for(var h=new a([],[],s),c=0;c<30;c++)h.cells.push(new o.Cell(new r.Point(Math.random()*r.setUp.mapwidth,Math.random()*r.setUp.mapheight),20*Math.random()+30,[255*Math.random(),255*Math.random(),255*Math.random()],[Math.random(),Math.random(),Math.random()]));for(c=0;c<500;c++)h.food.push(new n.Sugar(new r.Point(Math.round((r.setUp.borderRight-r.setUp.borderLeft)*Math.random())+r.setUp.borderLeft-1,Math.round((r.setUp.borderBottom-r.setUp.borderTop)*Math.random())+r.setUp.borderTop-1),[0,0,0]));h.initialize(),function t(){if(h.iterate(),h.timeCounter%300==0){h.cells.length;for(var e=[],i=0;i<h.cells.length;i++){var o=h.cells[i];if(o.size>100){var s=o.split();s[0].updatePoints(h.cells,h.food),s[1].updatePoints(h.cells,h.food),e.push(s[0]),e.push(s[0])}else e.push(o)}h.cells=e}if(h.food.length<400)for(i=0;i<200;i++)h.food.push(new n.Sugar(new r.Point(Math.round((r.setUp.borderRight-r.setUp.borderLeft)*Math.random())+r.setUp.borderLeft-1,Math.round((r.setUp.borderBottom-r.setUp.borderTop)*Math.random())+r.setUp.borderTop-1),[0,0,0]));setTimeout(t,1e3/60)}()},function(t,e,i){\"use strict\";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,\"__esModule\",{value:!0});var n=i(0),s=function(t){function e(i,o,r,s,a){void 0===a&&(a=o);var h=t.call(this,i,r,o)||this;h.DNA=s,h.targetSize=a,h.distanceThreshold=25,h.initialAngle=Math.random()*n.setUp.TAU,h.directionX=0,h.directionY=0,h.cellID=e.cellCount;for(var c=0;c<Math.ceil(h.size);c++)h.vertices.push(new n.Vertex(h,h.position,h.size,Math.random()-.5));return e.cellCount++,h.color=n.getAverageColor([[255,0,0],[0,255,0],[0,0,255]],h.DNA),h}return r(e,t),e.prototype.looseMass=function(){this.targetSize=Math.sqrt((Math.pow(this.targetSize,2)*Math.PI-10*(1-this.DNA[1]))/Math.PI)},e.prototype.eatFood=function(t){this.targetSize=Math.sqrt((Math.pow(this.targetSize,2)*Math.PI+t*this.DNA[1])/Math.PI)},e.prototype.split=function(){var t=Math.sqrt(Math.pow(this.targetSize,2)*Math.PI/2/Math.PI),i=new e(this.position,this.size,this.color,this.getDNAMutated()),o=new e(this.position,this.size,this.color,this.getDNAMutated());return i.targetSize=t,o.targetSize=t,[i,o]},e.prototype.getDNAMutated=function(){var t=this.DNA,e=t[0],i=t[1],o=t[2];return[e=Math.max(Math.min(e+Math.random()/10,1),0),i=Math.max(Math.min(i+Math.random()/10,1),0),o=Math.max(Math.min(o+Math.random()/10,1),0)]},e.prototype.movePoints=function(){for(var t=this.vertices.length,e=0;e<this.vertices.length;e++){this.size+=.9*(this.targetSize-this.size);var i=[this.vertices[e],this.vertices[(e-1+t)%t],this.vertices[(e+1)%t]],o=i[0],r=i[1],s=i[2],a=(r.velocity+s.velocity+8*Math.min(Math.max(.7*(o.velocity+Math.random()-.5),-10),10))/10,h=this.vertices[e].colliding?Math.min(a,0)-1:a,c=(r.distance+s.distance+8*(9*Math.max(o.distance+a,0)+this.size)/10)/10,l=n.setUp.TAU*e/t+this.initialAngle;this.vertices[e]=new n.Vertex(this,new n.Point(this.position.x+Math.cos(l)*c,this.position.y+Math.sin(l)*c),c,h)}},e.prototype.updatePoints=function(t,e){for(var i=[0,0],o=[0,0],r=300*this.DNA[2],n=0;n<t.length;n++){t[n].position.distanceSquared(this.position)-t[n].size-this.size<=r&&(t[n].size<this.size&&(i[0]+=t[n].position.x-this.position.x,i[1]+=t[n].position.y-this.position.y),t[n].size>this.size&&(i[0]-=t[n].position.x-this.position.x,i[1]-=t[n].position.y-this.position.y))}for(n=0;n<e.length;n++){e[n].position.distanceSquared(this.position)-this.size<=r&&(o[0]+=e[n].position.x-this.position.x,o[1]+=e[n].position.y-this.position.y)}i.toString()==[0,0].toString()&&(i=[100*Math.random()-50,100*Math.random()-50]),o.toString()==[0,0].toString()&&(o=[100*Math.random()-50,100*Math.random()-50]);var s=o[0],a=o[1],h=i[0],c=i[1];this.points=[[s/2,a/2],[(s+h)/2,(a+c)/2],[h/2,c/2],[h,c]]},e.prototype.moveXY=function(t){var e=5*this.DNA[0],i=n.bezierCurve(this.points[0],this.points[1],this.points[2],this.points[3],t),o=[i[0],i[1]],r=Math.max(Math.sqrt(o[0]*o[0]+o[1]*o[1]),1e-5),s=r<100?r/100:1;this.directionX=o[0]/r*s,this.directionY=o[1]/r*s,this.position=new n.Point(Math.max(Math.min(this.position.x+e*this.directionX,n.setUp.borderRight),n.setUp.borderLeft),Math.max(Math.min(this.position.y+e*this.directionY,n.setUp.borderBottom),n.setUp.borderTop))},e.prototype.drawSense=function(t){t.beginPath(),t.arc(this.position.x,this.position.y,300*this.DNA[2]+this.size,0,2*Math.PI),t.stroke()},e.prototype.draw=function(e){t.prototype.draw.call(this,e),this.drawSense(e)},e.cellCount=0,e}(i(1).GameObject);e.Cell=s},function(t,e,i){\"use strict\";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,\"__esModule\",{value:!0});var n=i(1),s=i(0),a=function(t){function e(e,i){for(var o=t.call(this,e,i,5)||this,r=0;r<Math.ceil(o.size);r++)o.vertices.push(new s.Vertex(o,o.position,o.size,Math.random()-.5));return o.initialAngle=Math.random()*s.setUp.TAU,o}return r(e,t),e.prototype.movePoints=function(){},e}(n.GameObject);e.Sugar=a}]);","extractedComments":[]}